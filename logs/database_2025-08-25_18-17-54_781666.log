2025-08-25 18:17:54.832 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:17:54.833 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:17:54.833 | INFO     | __main__:test_database_connection:38 - ✅ 数据库连接成功
2025-08-25 18:17:54.847 | INFO     | __main__:test_database_connection:42 - 数据库统计: {'total_records': 0, 'today_records': 0, 'latest_record': None, 'database_size': 0.0}
2025-08-25 18:17:54.850 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:17:54.850 | INFO     | __main__:run_all_tests:182 - 
🧪 测试: API客户端
2025-08-25 18:17:54.851 | INFO     | __main__:run_all_tests:183 - ------------------------------
2025-08-25 18:17:54.852 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:17:54.852 | INFO     | __main__:test_api_client:76 - ✅ API客户端初始化成功
2025-08-25 18:17:54.887 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x104350ee0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:55.895 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1042f2eb0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:57.899 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1042f2970>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:57.899 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:17:57.900 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:17:57.900 | WARNING  | __main__:test_api_client:82 - ⚠️ API连接测试失败（预期行为，服务器可能未运行）
2025-08-25 18:17:57.900 | INFO     | api_client:close:370 - API客户端连接已关闭
2025-08-25 18:17:57.901 | INFO     | __main__:run_all_tests:182 - 
🧪 测试: 调度器
2025-08-25 18:17:57.901 | INFO     | __main__:run_all_tests:183 - ------------------------------
2025-08-25 18:17:57.912 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:17:57.929 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:17:58.024 | INFO     | __main__:test_scheduler:96 - ✅ 调度器初始化成功
2025-08-25 18:17:58.025 | INFO     | __main__:test_scheduler:100 - 调度器状态: {'running': False, 'scheduler_type': 'APScheduler', 'jobs': []}
2025-08-25 18:17:58.027 | INFO     | __main__:run_all_tests:182 - 
🧪 测试: 抓取器初始化
2025-08-25 18:17:58.028 | INFO     | __main__:run_all_tests:183 - ------------------------------
2025-08-25 18:17:58.046 | INFO     | __main__:test_scraper_initialization:60 - ✅ 抓取器初始化成功
2025-08-25 18:17:58.049 | INFO     | __main__:run_all_tests:193 - 
==================================================
2025-08-25 18:17:58.051 | INFO     | __main__:run_all_tests:194 - 📊 测试结果汇总
2025-08-25 18:17:58.052 | INFO     | __main__:run_all_tests:195 - ==================================================
2025-08-25 18:17:58.054 | INFO     | __main__:run_all_tests:202 - 模块导入: ✅ 通过
2025-08-25 18:17:58.056 | INFO     | __main__:run_all_tests:202 - 配置加载: ✅ 通过
2025-08-25 18:17:58.057 | INFO     | __main__:run_all_tests:202 - 错误处理器: ✅ 通过
2025-08-25 18:17:58.058 | INFO     | __main__:run_all_tests:202 - 数据库连接: ✅ 通过
2025-08-25 18:17:58.059 | INFO     | __main__:run_all_tests:202 - API客户端: ✅ 通过
2025-08-25 18:17:58.060 | INFO     | __main__:run_all_tests:202 - 调度器: ✅ 通过
2025-08-25 18:17:58.062 | INFO     | __main__:run_all_tests:202 - 抓取器初始化: ✅ 通过
2025-08-25 18:17:58.064 | INFO     | __main__:run_all_tests:206 - 
总计: 7/7 个测试通过
2025-08-25 18:17:58.066 | INFO     | __main__:run_all_tests:209 - 🎉 所有测试通过！Python抓取工具准备就绪
