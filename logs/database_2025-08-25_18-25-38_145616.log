2025-08-25 18:25:38.241 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:25:38.242 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:25:38.243 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:25:38.244 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:25:38.279 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10644a310>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:25:39.289 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10644a5b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:25:41.297 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10644a910>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:25:41.297 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:25:41.298 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:25:41.299 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:25:41.315 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:25:41.335 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:25:41.459 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:25:41.461 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.33秒
2025-08-25 18:25:41.462 | INFO     | __main__:run_manual_fetch_today:221 - 开始手动抓取今日数据
2025-08-25 18:25:41.462 | INFO     | error_handler:__enter__:457 - 开始执行操作: 单次抓取 - 2025-08-25
2025-08-25 18:25:41.463 | INFO     | __main__:run_single_scraping:137 - 开始抓取数据: 2025-08-25
2025-08-25 18:25:41.464 | INFO     | python_scraper:run_scraper:454 - 开始运行台湾PK10数据抓取器
2025-08-25 18:25:45.488 | INFO     | python_scraper:setup_driver:78 - Chrome浏览器驱动设置完成
2025-08-25 18:25:45.490 | INFO     | python_scraper:navigate_to_page:87 - 正在访问: https://www.twpk10.com
2025-08-25 18:25:55.589 | ERROR    | python_scraper:navigate_to_page:101 - 导航到页面失败: Message: unknown error: net::ERR_CONNECTION_CLOSED
  (Session info: chrome=139.0.7258.139)
Stacktrace:
0   chromedriver                        0x0000000105564f58 chromedriver + 5934936
1   chromedriver                        0x000000010555c4ea chromedriver + 5899498
2   chromedriver                        0x0000000105024e00 chromedriver + 429568
3   chromedriver                        0x000000010501bdb6 chromedriver + 392630
4   chromedriver                        0x000000010500d078 chromedriver + 331896
5   chromedriver                        0x000000010500ed90 chromedriver + 339344
6   chromedriver                        0x000000010500d3fb chromedriver + 332795
7   chromedriver                        0x000000010500ce10 chromedriver + 331280
8   chromedriver                        0x000000010500cb1b chromedriver + 330523
9   chromedriver                        0x000000010500a9d4 chromedriver + 322004
10  chromedriver                        0x000000010500b19a chromedriver + 323994
11  chromedriver                        0x0000000105028379 chromedriver + 443257
12  chromedriver                        0x00000001050c4e25 chromedriver + 1084965
13  chromedriver                        0x000000010509d062 chromedriver + 921698
14  chromedriver                        0x00000001050c41e8 chromedriver + 1081832
15  chromedriver                        0x000000010509ce33 chromedriver + 921139
16  chromedriver                        0x000000010506939b chromedriver + 709531
17  chromedriver                        0x000000010506a081 chromedriver + 712833
18  chromedriver                        0x0000000105522650 chromedriver + 5662288
19  chromedriver                        0x0000000105526514 chromedriver + 5678356
20  chromedriver                        0x00000001054fd302 chromedriver + 5509890
21  chromedriver                        0x0000000105526fbf chromedriver + 5681087
22  chromedriver                        0x00000001054ec2a4 chromedriver + 5440164
23  chromedriver                        0x00000001055497d8 chromedriver + 5822424
24  chromedriver                        0x00000001055499a0 chromedriver + 5822880
25  chromedriver                        0x000000010555c0c1 chromedriver + 5898433
26  libsystem_pthread.dylib             0x00007ff81c8761d3 _pthread_start + 125
27  libsystem_pthread.dylib             0x00007ff81c871bd3 thread_start + 15

2025-08-25 18:25:55.748 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:25:55.749 | WARNING  | __main__:run_single_scraping:183 - 未抓取到数据
2025-08-25 18:25:55.750 | INFO     | error_handler:__exit__:464 - 操作完成: 单次抓取 - 2025-08-25，耗时: 14.29秒
2025-08-25 18:25:55.751 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:25:55.752 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:25:55.766 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:25:55.770 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:25:55.773 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_182555.json
2025-08-25 18:25:55.775 | INFO     | __main__:stop:329 - 应用已停止
