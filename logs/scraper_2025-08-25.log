2025-08-25 18:16:30 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:16:30 | INFO     | __main__:__init__:60 - 台湾PK10抓取应用初始化完成
2025-08-25 18:16:30 | INFO     | error_handler:__enter__:457 - 开始执行操作: 初始化组件
2025-08-25 18:16:30 | INFO     | __main__:initialize_components:94 - 抓取器初始化完成
2025-08-25 18:16:30 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:16:30 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:16:30 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:16:30 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:16:30 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:16:30 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1110cb130>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:16:31 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1110cb3d0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:16:33 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1110cb730>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:16:33 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:16:33 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:16:33 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:16:33 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:16:33 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:16:33 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:16:33 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.89秒
2025-08-25 18:16:33 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:16:33 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:16:33 | INFO     | database_manager:close_connection:338 - 数据库连接已关闭
2025-08-25 18:16:33 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_181633.json
2025-08-25 18:16:33 | INFO     | __main__:stop:329 - 应用已停止
2025-08-25 18:17:09 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:17:09 | INFO     | __main__:__init__:60 - 台湾PK10抓取应用初始化完成
2025-08-25 18:17:09 | INFO     | error_handler:__enter__:457 - 开始执行操作: 初始化组件
2025-08-25 18:17:09 | INFO     | __main__:initialize_components:94 - 抓取器初始化完成
2025-08-25 18:17:09 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:17:09 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:17:09 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:17:09 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:17:09 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:17:09 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x106c8b5b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:10 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x106cb7280>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:12 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x106cb75e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:12 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:17:12 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:17:12 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:17:12 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:17:12 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:17:13 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:17:13 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.28秒
2025-08-25 18:17:13 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:17:13 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:17:13 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:17:13 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_181713.json
2025-08-25 18:17:13 | INFO     | __main__:stop:329 - 应用已停止
2025-08-25 18:18:06 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:18:06 | INFO     | __main__:__init__:60 - 台湾PK10抓取应用初始化完成
2025-08-25 18:18:06 | INFO     | error_handler:__enter__:457 - 开始执行操作: 初始化组件
2025-08-25 18:18:06 | INFO     | __main__:initialize_components:94 - 抓取器初始化完成
2025-08-25 18:18:06 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:18:06 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:18:06 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:18:06 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:18:06 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:18:06 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x112092340>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:18:07 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1120925e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:18:09 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x112092940>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:18:09 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:18:09 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:18:09 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:18:09 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:18:09 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:18:09 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:18:09 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.26秒
2025-08-25 18:18:09 | INFO     | __main__:run_manual_fetch_today:221 - 开始手动抓取今日数据
2025-08-25 18:18:09 | INFO     | error_handler:__enter__:457 - 开始执行操作: 单次抓取 - 2025-08-25
2025-08-25 18:18:09 | INFO     | __main__:run_single_scraping:137 - 开始抓取数据: 2025-08-25
2025-08-25 18:18:09 | INFO     | python_scraper:run_scraper:448 - 开始运行台湾PK10数据抓取器
2025-08-25 18:18:19 | ERROR    | python_scraper:setup_driver:75 - 设置浏览器驱动失败: [Errno 8] Exec format error: '/Users/a1234/.wdm/drivers/chromedriver/mac64/139.0.7258.138/chromedriver-mac-x64/THIRD_PARTY_NOTICES.chromedriver'
2025-08-25 18:18:19 | ERROR    | python_scraper:run_scraper:473 - 运行抓取器失败: [Errno 8] Exec format error: '/Users/a1234/.wdm/drivers/chromedriver/mac64/139.0.7258.138/chromedriver-mac-x64/THIRD_PARTY_NOTICES.chromedriver'
2025-08-25 18:18:19 | WARNING  | __main__:run_single_scraping:183 - 未抓取到数据
2025-08-25 18:18:19 | INFO     | error_handler:__exit__:464 - 操作完成: 单次抓取 - 2025-08-25，耗时: 10.46秒
2025-08-25 18:18:19 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:18:19 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:18:19 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:18:19 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_181819.json
2025-08-25 18:18:19 | INFO     | __main__:stop:329 - 应用已停止
2025-08-25 18:25:38 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:25:38 | INFO     | __main__:__init__:60 - 台湾PK10抓取应用初始化完成
2025-08-25 18:25:38 | INFO     | error_handler:__enter__:457 - 开始执行操作: 初始化组件
2025-08-25 18:25:38 | INFO     | __main__:initialize_components:94 - 抓取器初始化完成
2025-08-25 18:25:38 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:25:38 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:25:38 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:25:38 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:25:38 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:25:38 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10644a310>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:25:39 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10644a5b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:25:41 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10644a910>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:25:41 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:25:41 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:25:41 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:25:41 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:25:41 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:25:41 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:25:41 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.33秒
2025-08-25 18:25:41 | INFO     | __main__:run_manual_fetch_today:221 - 开始手动抓取今日数据
2025-08-25 18:25:41 | INFO     | error_handler:__enter__:457 - 开始执行操作: 单次抓取 - 2025-08-25
2025-08-25 18:25:41 | INFO     | __main__:run_single_scraping:137 - 开始抓取数据: 2025-08-25
2025-08-25 18:25:41 | INFO     | python_scraper:run_scraper:454 - 开始运行台湾PK10数据抓取器
2025-08-25 18:25:45 | INFO     | python_scraper:setup_driver:78 - Chrome浏览器驱动设置完成
2025-08-25 18:25:45 | INFO     | python_scraper:navigate_to_page:87 - 正在访问: https://www.twpk10.com
2025-08-25 18:25:55 | ERROR    | python_scraper:navigate_to_page:101 - 导航到页面失败: Message: unknown error: net::ERR_CONNECTION_CLOSED
  (Session info: chrome=139.0.7258.139)
Stacktrace:
0   chromedriver                        0x0000000105564f58 chromedriver + 5934936
1   chromedriver                        0x000000010555c4ea chromedriver + 5899498
2   chromedriver                        0x0000000105024e00 chromedriver + 429568
3   chromedriver                        0x000000010501bdb6 chromedriver + 392630
4   chromedriver                        0x000000010500d078 chromedriver + 331896
5   chromedriver                        0x000000010500ed90 chromedriver + 339344
6   chromedriver                        0x000000010500d3fb chromedriver + 332795
7   chromedriver                        0x000000010500ce10 chromedriver + 331280
8   chromedriver                        0x000000010500cb1b chromedriver + 330523
9   chromedriver                        0x000000010500a9d4 chromedriver + 322004
10  chromedriver                        0x000000010500b19a chromedriver + 323994
11  chromedriver                        0x0000000105028379 chromedriver + 443257
12  chromedriver                        0x00000001050c4e25 chromedriver + 1084965
13  chromedriver                        0x000000010509d062 chromedriver + 921698
14  chromedriver                        0x00000001050c41e8 chromedriver + 1081832
15  chromedriver                        0x000000010509ce33 chromedriver + 921139
16  chromedriver                        0x000000010506939b chromedriver + 709531
17  chromedriver                        0x000000010506a081 chromedriver + 712833
18  chromedriver                        0x0000000105522650 chromedriver + 5662288
19  chromedriver                        0x0000000105526514 chromedriver + 5678356
20  chromedriver                        0x00000001054fd302 chromedriver + 5509890
21  chromedriver                        0x0000000105526fbf chromedriver + 5681087
22  chromedriver                        0x00000001054ec2a4 chromedriver + 5440164
23  chromedriver                        0x00000001055497d8 chromedriver + 5822424
24  chromedriver                        0x00000001055499a0 chromedriver + 5822880
25  chromedriver                        0x000000010555c0c1 chromedriver + 5898433
26  libsystem_pthread.dylib             0x00007ff81c8761d3 _pthread_start + 125
27  libsystem_pthread.dylib             0x00007ff81c871bd3 thread_start + 15

2025-08-25 18:25:55 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:25:55 | WARNING  | __main__:run_single_scraping:183 - 未抓取到数据
2025-08-25 18:25:55 | INFO     | error_handler:__exit__:464 - 操作完成: 单次抓取 - 2025-08-25，耗时: 14.29秒
2025-08-25 18:25:55 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:25:55 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:25:55 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:25:55 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:25:55 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_182555.json
2025-08-25 18:25:55 | INFO     | __main__:stop:329 - 应用已停止
2025-08-25 18:27:20 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:27:20 | INFO     | __main__:__init__:60 - 台湾PK10抓取应用初始化完成
2025-08-25 18:27:20 | INFO     | error_handler:__enter__:457 - 开始执行操作: 初始化组件
2025-08-25 18:27:20 | INFO     | __main__:initialize_components:94 - 抓取器初始化完成
2025-08-25 18:27:20 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:27:20 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:27:20 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:27:20 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:27:20 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:27:20 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10590b5b0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:27:21 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10590b850>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:27:23 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10590bbb0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:27:23 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:27:23 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:27:23 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:27:23 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:27:23 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:27:23 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:27:23 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.32秒
2025-08-25 18:27:23 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:27:23 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:27:23 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:27:23 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_182723.json
2025-08-25 18:27:23 | INFO     | __main__:stop:329 - 应用已停止
2025-08-25 18:28:08 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:28:08 | INFO     | __main__:__init__:60 - 台湾PK10抓取应用初始化完成
2025-08-25 18:28:08 | INFO     | error_handler:__enter__:457 - 开始执行操作: 初始化组件
2025-08-25 18:28:08 | INFO     | __main__:initialize_components:94 - 抓取器初始化完成
2025-08-25 18:28:08 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:28:09 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:28:09 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:28:09 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:28:09 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:28:09 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1067811c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:28:10 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x106781460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:28:12 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1067817c0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:28:12 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:28:12 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:28:12 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:28:12 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:28:12 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:28:12 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:28:12 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.36秒
2025-08-25 18:28:12 | INFO     | __main__:run_manual_fetch_today:221 - 开始手动抓取今日数据
2025-08-25 18:28:12 | INFO     | error_handler:__enter__:457 - 开始执行操作: 单次抓取 - 2025-08-25
2025-08-25 18:28:12 | INFO     | __main__:run_single_scraping:137 - 开始抓取数据: 2025-08-25
2025-08-25 18:28:12 | INFO     | python_scraper:run_scraper:454 - 开始运行台湾PK10数据抓取器
2025-08-25 18:28:15 | INFO     | python_scraper:setup_driver:78 - Chrome浏览器驱动设置完成
2025-08-25 18:28:15 | INFO     | python_scraper:navigate_to_page:87 - 正在访问: https://www.twpk10.com
2025-08-25 18:28:22 | ERROR    | python_scraper:navigate_to_page:101 - 导航到页面失败: Message: unknown error: net::ERR_CONNECTION_CLOSED
  (Session info: chrome=139.0.7258.139)
Stacktrace:
0   chromedriver                        0x000000010147ef58 chromedriver + 5934936
1   chromedriver                        0x00000001014764ea chromedriver + 5899498
2   chromedriver                        0x0000000100f3ee00 chromedriver + 429568
3   chromedriver                        0x0000000100f35db6 chromedriver + 392630
4   chromedriver                        0x0000000100f27078 chromedriver + 331896
5   chromedriver                        0x0000000100f28d90 chromedriver + 339344
6   chromedriver                        0x0000000100f273fb chromedriver + 332795
7   chromedriver                        0x0000000100f26e10 chromedriver + 331280
8   chromedriver                        0x0000000100f26b1b chromedriver + 330523
9   chromedriver                        0x0000000100f249d4 chromedriver + 322004
10  chromedriver                        0x0000000100f2519a chromedriver + 323994
11  chromedriver                        0x0000000100f42379 chromedriver + 443257
12  chromedriver                        0x0000000100fdee25 chromedriver + 1084965
13  chromedriver                        0x0000000100fb7062 chromedriver + 921698
14  chromedriver                        0x0000000100fde1e8 chromedriver + 1081832
15  chromedriver                        0x0000000100fb6e33 chromedriver + 921139
16  chromedriver                        0x0000000100f8339b chromedriver + 709531
17  chromedriver                        0x0000000100f84081 chromedriver + 712833
18  chromedriver                        0x000000010143c650 chromedriver + 5662288
19  chromedriver                        0x0000000101440514 chromedriver + 5678356
20  chromedriver                        0x0000000101417302 chromedriver + 5509890
21  chromedriver                        0x0000000101440fbf chromedriver + 5681087
22  chromedriver                        0x00000001014062a4 chromedriver + 5440164
23  chromedriver                        0x00000001014637d8 chromedriver + 5822424
24  chromedriver                        0x00000001014639a0 chromedriver + 5822880
25  chromedriver                        0x00000001014760c1 chromedriver + 5898433
26  libsystem_pthread.dylib             0x00007ff81c8761d3 _pthread_start + 125
27  libsystem_pthread.dylib             0x00007ff81c871bd3 thread_start + 15

2025-08-25 18:28:22 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:28:22 | WARNING  | __main__:run_single_scraping:183 - 未抓取到数据
2025-08-25 18:28:22 | INFO     | error_handler:__exit__:464 - 操作完成: 单次抓取 - 2025-08-25，耗时: 10.04秒
2025-08-25 18:28:22 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:28:22 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:28:22 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:28:22 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:28:22 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_182822.json
2025-08-25 18:28:22 | INFO     | __main__:stop:329 - 应用已停止
2025-08-25 18:30:32 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:30:32 | INFO     | __main__:__init__:60 - 台湾PK10抓取应用初始化完成
2025-08-25 18:30:32 | INFO     | error_handler:__enter__:457 - 开始执行操作: 初始化组件
2025-08-25 18:30:32 | INFO     | __main__:initialize_components:94 - 抓取器初始化完成
2025-08-25 18:30:32 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:30:32 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:30:32 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:30:32 | INFO     | __main__:initialize_components:100 - 数据库管理器初始化完成
2025-08-25 18:30:32 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:30:32 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x108677460>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:30:33 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x108677700>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:30:35 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x108677a60>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:30:35 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:30:35 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:30:35 | WARNING  | __main__:initialize_components:108 - API连接测试失败，将跳过API同步功能
2025-08-25 18:30:35 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:30:35 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:30:35 | INFO     | __main__:initialize_components:116 - 调度器初始化完成
2025-08-25 18:30:35 | INFO     | error_handler:__exit__:464 - 操作完成: 初始化组件，耗时: 3.26秒
2025-08-25 18:30:35 | INFO     | __main__:run_manual_fetch_today:221 - 开始手动抓取今日数据
2025-08-25 18:30:35 | INFO     | error_handler:__enter__:457 - 开始执行操作: 单次抓取 - 2025-08-25
2025-08-25 18:30:35 | INFO     | __main__:run_single_scraping:137 - 开始抓取数据: 2025-08-25
2025-08-25 18:30:35 | INFO     | python_scraper:run_scraper:454 - 开始运行台湾PK10数据抓取器
2025-08-25 18:30:39 | INFO     | python_scraper:setup_driver:78 - Chrome浏览器驱动设置完成
2025-08-25 18:30:39 | INFO     | python_scraper:navigate_to_page:87 - 正在访问: https://xn--kpro5poukl1g.com/#/
2025-08-25 18:30:45 | INFO     | python_scraper:navigate_to_page:94 - 页面加载完成
2025-08-25 18:30:45 | WARNING  | python_scraper:select_date:131 - 未找到日期选择器，使用默认日期
2025-08-25 18:30:45 | INFO     | python_scraper:scrape_all_pages:380 - 正在抓取第 1 页数据
2025-08-25 18:30:45 | INFO     | python_scraper:extract_lottery_data:168 - 找到 1 行数据
2025-08-25 18:30:45 | INFO     | python_scraper:extract_lottery_data:207 - 成功提取 0 条数据
2025-08-25 18:30:45 | WARNING  | python_scraper:scrape_all_pages:388 - 第 1 页没有获取到数据
2025-08-25 18:30:47 | INFO     | python_scraper:navigate_to_next_page:366 - 没有找到下一页按钮
2025-08-25 18:30:47 | INFO     | python_scraper:scrape_all_pages:396 - 没有更多页面，抓取完成
2025-08-25 18:30:47 | INFO     | python_scraper:scrape_all_pages:402 - 总共抓取了 1 页，获得 0 条数据
2025-08-25 18:30:47 | INFO     | python_scraper:run_scraper:475 - 抓取完成，共获得 0 条数据
2025-08-25 18:30:47 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:30:47 | WARNING  | __main__:run_single_scraping:183 - 未抓取到数据
2025-08-25 18:30:47 | INFO     | error_handler:__exit__:464 - 操作完成: 单次抓取 - 2025-08-25，耗时: 12.34秒
2025-08-25 18:30:47 | INFO     | __main__:stop:309 - 正在停止应用...
2025-08-25 18:30:47 | ERROR    | scheduler:stop:317 - 停止调度器失败: Scheduler is not running
2025-08-25 18:30:47 | INFO     | python_scraper:cleanup:490 - 浏览器驱动已关闭
2025-08-25 18:30:47 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:30:47 | INFO     | error_handler:save_error_report:302 - 错误报告已保存: logs/error_report_20250825_183047.json
2025-08-25 18:30:47 | INFO     | __main__:stop:329 - 应用已停止
