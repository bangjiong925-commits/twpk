2025-08-25 18:17:54 | INFO     | error_handler:__init__:171 - 错误处理器初始化完成
2025-08-25 18:17:54 | INFO     | __main__:test_error_handler:121 - ✅ 错误处理器初始化成功
2025-08-25 18:17:54 | INFO     | __main__:test_error_handler:125 - 错误统计: {'total_errors': 0, 'error_counts_by_type': {}, 'recent_errors_count': 0, 'last_error_time': None, 'system_info': {'cpu_count': 8, 'memory_total': 17179869184, 'disk_usage': 28.0, 'python_version': '3.9.6 (default, May  7 2023, 23:32:45) \n[Clang 14.0.3 (clang-1403.0.22.14.1)]', 'platform': 'darwin', 'pid': 25774}}
2025-08-25 18:17:54 | INFO     | __main__:run_all_tests:182 - 
🧪 测试: 数据库连接
2025-08-25 18:17:54 | INFO     | __main__:run_all_tests:183 - ------------------------------
2025-08-25 18:17:54 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:17:54 | INFO     | database_manager:_create_indexes:108 - 数据库索引创建完成
2025-08-25 18:17:54 | INFO     | database_manager:connect:83 - 成功连接到MongoDB数据库: taiwanpk10
2025-08-25 18:17:54 | INFO     | __main__:test_database_connection:38 - ✅ 数据库连接成功
2025-08-25 18:17:54 | INFO     | __main__:test_database_connection:42 - 数据库统计: {'total_records': 0, 'today_records': 0, 'latest_record': None, 'database_size': 0.0}
2025-08-25 18:17:54 | INFO     | database_manager:close_connection:339 - 数据库连接已关闭
2025-08-25 18:17:54 | INFO     | __main__:run_all_tests:182 - 
🧪 测试: API客户端
2025-08-25 18:17:54 | INFO     | __main__:run_all_tests:183 - ------------------------------
2025-08-25 18:17:54 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:17:54 | INFO     | __main__:test_api_client:76 - ✅ API客户端初始化成功
2025-08-25 18:17:54 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 1/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x104350ee0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:55 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 2/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1042f2eb0>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:57 | WARNING  | api_client:_make_request:101 - 请求失败 (尝试 3/3): HTTPConnectionPool(host='localhost', port=3000): Max retries exceeded with url: /api/health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1042f2970>: Failed to establish a new connection: [Errno 61] Connection refused'))
2025-08-25 18:17:57 | ERROR    | api_client:_make_request:103 - 请求最终失败: http://localhost:3000/api/health
2025-08-25 18:17:57 | ERROR    | api_client:test_connection:125 - API连接测试失败
2025-08-25 18:17:57 | WARNING  | __main__:test_api_client:82 - ⚠️ API连接测试失败（预期行为，服务器可能未运行）
2025-08-25 18:17:57 | INFO     | api_client:close:370 - API客户端连接已关闭
2025-08-25 18:17:57 | INFO     | __main__:run_all_tests:182 - 
🧪 测试: 调度器
2025-08-25 18:17:57 | INFO     | __main__:run_all_tests:183 - ------------------------------
2025-08-25 18:17:57 | INFO     | database_manager:_get_connection_string:46 - 使用数据库连接: mongodb://localhost:27017/taiwan_pk10_test...
2025-08-25 18:17:57 | INFO     | api_client:__init__:61 - API客户端初始化完成，基础URL: http://localhost:3000
2025-08-25 18:17:58 | INFO     | __main__:test_scheduler:96 - ✅ 调度器初始化成功
2025-08-25 18:17:58 | INFO     | __main__:test_scheduler:100 - 调度器状态: {'running': False, 'scheduler_type': 'APScheduler', 'jobs': []}
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:182 - 
🧪 测试: 抓取器初始化
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:183 - ------------------------------
2025-08-25 18:17:58 | INFO     | __main__:test_scraper_initialization:60 - ✅ 抓取器初始化成功
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:193 - 
==================================================
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:194 - 📊 测试结果汇总
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:195 - ==================================================
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:202 - 模块导入: ✅ 通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:202 - 配置加载: ✅ 通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:202 - 错误处理器: ✅ 通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:202 - 数据库连接: ✅ 通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:202 - API客户端: ✅ 通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:202 - 调度器: ✅ 通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:202 - 抓取器初始化: ✅ 通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:206 - 
总计: 7/7 个测试通过
2025-08-25 18:17:58 | INFO     | __main__:run_all_tests:209 - 🎉 所有测试通过！Python抓取工具准备就绪
